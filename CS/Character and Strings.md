# Character and Strings
본 내용은 [양태환](https://github.com/ythwork)님의 저서 **컴퓨터 사이언스 부트캠프 with 파이썬** 을 읽고 요약정리한 내용

* Reference
	+ <http://norux.me/31> 
	+ <https://www.bsidesoft.com/?p=3435>
	+ <https://ko.wikipedia.org/wiki/%EB%AC%B8%EC%9E%90_%EC%9D%B8%EC%BD%94%EB%94%A9>

## 1. 아스키코드
아스키코드 절에 들어가기에 앞서 아래의 용어들을 기억

* **문자 집합(character set)** : 문자(character)를 모아둔 집합,
  + eg. 라틴문자
* **문자 인코딩(character encoding)** : 문자 집합을 메모리에 저장하거나 통신하는데 사용하기위해 부호화하는 방식  
  + **코드 포인트(code point)** : 컴퓨터에 문자를 인식시키려면 문자를 정수에 매핑하고 이를 0과 1로 이루어진 2진수로 나타내야함. ***이때 매핑된 정수를 코드 포인트(code point)라고 함***
  + **부호화된 문자 집합(coded character set, ccs)** : 문자마다 매핑된 코드 포인트를 모아놓은 집합
    - 아스키코드(ASCII) : 7비트 활용, 0~127까지의 코드 포인트 활용, 128개의 문자 
    - 유니코드(UNICODE) : 16비트(2바이트) 활용, 0 ~ 65,535까지의 코드 포인트 활용, 65,536개의 문자

* **문자 인코딩 방식(character encoding scheme, ces)** : 특정 부호화된 문자집합에서 나온 코드 포인트를 2진수로 바꾸었을 때, 이를 코드 유닛으로 인코딩하는 방법
  - eg. UTF-8, UTF-16, UTF-32, CP949, EUC-KR
  + **코드 유닛(code unit)** : 코드 포인트를 2진수로 변환하고 이를 특정 방법(eg. UTF-8)으로 인코딩했을 대 얻어지는 비트의 나열 

**아스키(american standard code for information interchange, ascii)** 는 대표적인 부호화된 문자 집합이면서 문자 인코딩 방식이다. (아스키는 특정한 코드 유닛을 만들지 않고 코드 포인트를 2진수로 바꾸어 그대로 메모리에 저장함)  아스키코드의 특징은 아래와 같다.

* 7비트로 문자를 표현하므로 총 128개의 문자를 표현 가능
* 코드 포인트는  0 ~127까지의 정수

예를 들어, 대문자 "A"는 10진수로 65, 16진수로는 0x41이다.

```python
char = 'A'
char = char.encode(encoding = 'ascii')
print('code point : {}, hexadecimal: {}'.format(char[0], hex(char[0])))
```

```bash
code point : 65, hexadecimal: 0x41 
```

아스키코드를 보면 정수 0부터 127까지 문자와 매핑되어있고, 2진수로 $0000 \ 0000_{(2)}$ 부터 $0111 \ 1111_{(2)}$ 이므로 최대 7비트가 필요하다. 정수를 나타내는 자료형은 바이트 수에 따라 다양하며, int형이 가장 자주 쓰인다. 일반적으로 32비트 컴퓨터에서는 아래와 같다.

* 바이트 수에 따른 정수를 나타내는 자료형 (32비트, 64비트 동일)
  + int : 4바이트
  + short : 2바이트
  + char : 1바이트

위를 보았을 때, 아스키코드를 표현하는 데는 int, short 자료형을 사용하는 것은 메모리를 낭비하는 것이다. char 자료형은 문자를 담기 위해 만들어진 자료형이지만 정수 자료형이므로 작은 수를 표현하는 데 사용하기도 한다.

## 2. 유니코드
**유니코드(unicode)** 는 16비트로 문자를 표현하여 65,536개의 문자를 표현할 수 있는 부호화된 문자 집합이다. 그 특징은 아래와 같다.

* 아스키 코드를 포함한다. 기존 아스키코드에 $0000 \ 0000$을 붙임
	+ $0000 \ 0000 \ 0000 \ 0000_{(2)} \sim 0000 \ 0000 \ 0111 \ 1111_{(2)}$ 이며 16진수로 표현하면 0x0000 ~ 0x007f
* **기본 다국어 평면(basic multilingual plane, bmp)** 외에 여러 평면을 가지고 있다.
	+ 기본 다국어 평면은 65,536개의 코드 포인트를 가지고 있고, 여기에 한글 및 많은 언어의 문자가 매핑되어있다.
	+ U+0000 ~ U+FFFF

코드로 한글의 범위를 확인해보면 다음과 같다.

```python
print('\uac00')
```

```bash
가
```

## 3. 유니코드기반 인코딩 방식
### 3.1 UTF-8
**UTF-8(universal coded character set transformation format - 8bit)** 은 유니코드 기반의 인코딩 방식 중 하나로 유니코드 문자 하나를 1바이트에서 4바이트 사이에서 표현한다. 그 특징은 아래와 같다.

* 가변 길이 인코딩 방식으로 유니코드에서 코드포인트에 따라 인코딩의 결과물인 코드유닛의 바이트가 다르다. 
	+ U+0000 ~ U+007F : 1바이트
	+ U+0080 ~ U+07FF : 2바이트
	+ U+0800 ~ U+FFFF : 3바이트, 한글이 여기에 해당됨
	+ 그 외 4바이트 
* endianless 방식이다.

유니코드에서 한글 "가"의 코드포인트는 U+AC00으로 UTF-8로 인코딩하면 ex b0 80이다. 코드로 확인하면 아래와 같다.

```python
char = '\uac00'
print(char)
print(char.encode(encoding = 'utf-8'))
```

```bash
가
b'\xea\xb0\x80'
```
한글 "가"의 유니코드 코드포인트에서 UTF-8로 인코딩 과정은 아래와 같다.

1. "가" 코드 포인트 U+ac00을 2진수로 표현한다.
$$
1010 \ 1100 \ 0000 \ 0000_{(2)}
$$

2. UTF-8에서 유니코드 코드 포인트가 U+0800에서 U+FFFF인 문자는 다음의 포맷으으로 인코딩하여 코드 유닛을 생성한다.
$$
1110XXXX \ 10XXXXXX \ 10XXXXXX
$$

3. 위의 포맷에 맞추어 1에서 2진수로 표현한 것을 X에 앞에서부터 차례로 채워넣는다.
$$
11101010 \ 10110000 \ 10000000
$$

4. 3의 2진수를 16진수로 표현하면 0xeab080

## 3.2 UTF-16
**UTF-16** 은 유니코드 기반의 인코딩 방식 중 하나로 2바이트 단위로 문자를 표현한다. 해당 문자가 기본 다국어 평면에 있으면 2바이트로 인코딩되고, 그렇지 않으면 4바이트로 인코딩한다.

## 3.3 UTF-32
**UTF-32** 는 유니코드 인코딩 방식의 하나로 모든 문자를 4바이트로 인코딩한다.
